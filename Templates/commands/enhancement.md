---
version: "v0.42.1"
description: Create an enhancement issue with standard template (project)
argument-hint: "<title>"
---

<!-- EXTENSIBLE -->
# /enhancement
Creates a properly labeled enhancement issue with a standard template and adds it to the project board.
## Available Extension Points
| Point | Location | Purpose |
|-------|----------|---------|
| `pre-create` | Before issue creation | Duplicate detection, template customization |
| `post-create` | After issue created | Notifications, auto-assignment to branch |
---
## Prerequisites
- `gh pmu` extension installed
- `.gh-pmu.yml` configured in repository root
---
## Arguments
| Argument | Required | Description |
|----------|----------|-------------|
| `<title>` | No | Enhancement title (e.g., `add dark mode support`) |
If no title provided, prompt the user for one.
---
## Execution Instructions
**REQUIRED:** Before executing:
1. **Generate Todo List:** Parse workflow steps, use `TodoWrite` to create todos
2. **Include Extensions:** Add todo item for each non-empty `USER-EXTENSION` block
3. **Track Progress:** Mark todos `in_progress` → `completed` as you work
4. **Post-Compaction:** Re-read spec and regenerate todos after context compaction
**Todo Rules:** One todo per numbered step; one todo per active extension; skip commented-out extensions.
---
## Workflow
### Step 1: Parse Arguments
Extract `<title>` from command arguments.
**If empty:** Ask the user for an enhancement title.
**If title contains special characters** (backticks, quotes): Escape for shell. On Windows, use temp file approach.
### Step 2: Gather Description
Extract `<body>` from command arguments.
**If insufficient detail provided**, ask the user:
```
Describe the enhancement (what it does, why it's useful):
```
**If user provides description:** Use it as the issue body.
**If user declines or says "skip":** Create with minimal body.

<!-- USER-EXTENSION-START: pre-create -->
<!-- USER-EXTENSION-END: pre-create -->

### Step 3: Create Issue
Build issue body with standard enhancement template:
```markdown
## Enhancement
**Description:**
{user description or "To be documented"}
**Motivation:**
...
**Proposed Solution:**
...
```
Create the issue:
```bash
gh pmu create --title "[Enhancement]: {title}" --label enhancement --status backlog --priority p2 --assignee @me -F .tmp-body.md
rm .tmp-body.md
```
**Note:** Always use `-F .tmp-body.md` for the body (never inline `--body`).
### Step 4: Report and STOP
```
Created: Issue #$ISSUE_NUM — [Enhancement]: {title}
Status: Backlog
Label: enhancement

Say "/review-issue #$ISSUE_NUM" then "/assign-branch #$ISSUE_NUM" then "work #$ISSUE_NUM" to start working on this enhancement.
```

<!-- USER-EXTENSION-START: post-create -->
<!-- USER-EXTENSION-END: post-create -->

**STOP.** Do not begin work unless the user explicitly says "work", "fix that", or "implement that".
---
## Error Handling
| Situation | Response |
|-----------|----------|
| No title provided | Prompt user for title |
| Empty title after prompt | "An enhancement title is required." → STOP |
| `gh pmu create` fails | "Failed to create issue: {error}" → STOP |
| Special characters in title | Escape for shell safety |
---
**End of /enhancement Command**
